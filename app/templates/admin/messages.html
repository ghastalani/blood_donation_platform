{% extends "base.html" %}

{% block content %}
<div class="admin-messages-container" style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
    <div class="header-section"
        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2 style="color: #8B0000;">Message Inbox</h2>
        <a href="{{ url_for('admin.dashboard') }}" class="btn"
            style="background: #666; color: white; padding: 0.5rem 1.5rem; text-decoration: none; border-radius: 6px;">&larr;
            Back to Dashboard</a>
    </div>

    <div class="messages-list">
        {% for msg in messages %}
        <div class="message-card {% if not msg.is_read %}unread{% endif %}" style="background: {% if not msg.is_read %}#FFF3E0{% else %}white{% endif %}; 
                   padding: 1.5rem; 
                   border-radius: 12px; 
                   box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
                   margin-bottom: 1rem;
                   border-left: 4px solid {% if not msg.is_read %}#FF6F00{% else %}#E0E0E0{% endif %};">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                <div>
                    <h4 style="margin: 0 0 0.5rem 0; color: #333;">{{ msg.name }}</h4>
                    <p style="margin: 0; color: #666; font-size: 0.9rem;">{{ msg.email }}</p>
                </div>
                <div style="text-align: right;">
                    <small style="color: #999;">{{ msg.created_at }}</small>
                    {% if not msg.is_read %}
                    <span
                        style="display: block; background: #FF6F00; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem; margin-top: 0.5rem;">New</span>
                    {% endif %}
                </div>
            </div>
            <p style="color: #333; line-height: 1.6; margin: 1rem 0;">{{ msg.message }}</p>
            {% if not msg.is_read %}
            <a href="{{ url_for('admin.mark_message_read', message_id=msg.id) }}"
                style="background: #8B0000; color: white; padding: 0.5rem 1.5rem; text-decoration: none; border-radius: 6px; display: inline-block; font-size: 0.9rem;">
                Mark as Read
            </a>
            {% endif %}
        </div>
        {% else %}
        <div
            style="text-align: center; padding: 3rem; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <p style="color: #999; font-size: 1.1rem;">No messages yet.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}